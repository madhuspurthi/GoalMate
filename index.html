<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="GoalMate: Connect with buddies, join goal groups, track your progress, and get motivated. Your partner in self-improvement.">
    <title>GoalMate - Achieve Your Goals, Together</title>

    <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@^19.1.0",
        "react-dom/": "https://esm.sh/react-dom@^19.1.0/",
        "react/": "https://esm.sh/react@^19.1.0/",
        "@google/genai": "https://esm.sh/@google/genai@^1.2.0",
        "@supabase/supabase-js": "https://esm.sh/@supabase/supabase-js@^2.45.0"
      }
    }
    </script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Palette Option 1: "Energized & Focused" - existing */
            --color-primary: #3B82F6; /* Blue 500 */
            --color-accent1: #14B8A6; /* Teal 500 */
            --color-accent2: #F59E0B; /* Amber 500 */
            --color-bg: #F9FAFB;      /* Gray 50 */
            --color-surface: #FFFFFF; /* White */
            --color-text: #1F2937;       /* Gray 800 */
            --color-text-muted: #6B7280; /* Gray 500 */
            --color-white: #FFFFFF;
            --color-border: #D1D5DB;    /* Gray 300 */
            
            --color-danger: #DC2626; /* Red 600 */
            --color-danger-light: #EF4444; /* Red 500 */
            --color-danger-dark: #B91C1C; /* Red 700 */
            --color-danger-bg: #FEE2E2; /* Red 100 */
            
            --color-success: #10B981; /* Emerald 500 */
            --color-success-bg: #D1FAE5; /* Emerald 100 */
            --color-success-dark: #065F46; /* Emerald 800 */

            --color-info: #3B82F6; /* Blue 500 */
            --color-info-bg: #EFF6FF; /* Blue 50 */
            --color-info-border: #BFDBFE; /* Blue 200 */

            --color-warning: #F59E0B; /* Amber 500 */
            --color-warning-bg: #FFFBEB; /* Amber 50 */
            --color-warning-border: #FDE68A; /* Amber 200 */
            --color-warning-dark: #B45309; /* Amber 700 */
            
            --color-auth-illust-bg: var(--color-primary); 
            --color-auth-illust-text: var(--color-white);
            --color-auth-illust-card-bg: rgba(255, 255, 255, 0.15);
            --color-auth-illust-card-border: rgba(255, 255, 255, 0.25);
            --color-auth-form-bg: var(--color-bg);

            --color-sidebar-bg: #111827; /* Gray 900 */
            --color-sidebar-text: #D1D5DB; /* Gray 300 */
            --color-sidebar-active-bg: var(--color-primary);
            --color-sidebar-active-text: var(--color-white);
            --color-sidebar-hover-bg: #1F2937; /* Gray 800 */

            --color-spark-bg: var(--color-warning-bg-light);
            --color-spark-border: #FCD34D; 
            --color-spark-text: #B45309; 

            --color-daily-quest-bg: #E0F2FE; /* Light Sky Blue */
            --color-daily-quest-border: var(--color-primary); 
            --color-daily-quest-text: var(--color-primary); 
            --color-daily-quest-icon: var(--color-primary);
            
            /* Habit Tracker Redesign Colors */
            --color-habit-card-bg: #FEFCE8; /* Light Yellow - cozy */
            --color-habit-card-border: #FDE68A; /* Yellow 300 */
            --color-habit-action-button-bg: #FFFBEB; /* Amber 50 */
            --color-habit-action-button-text: #D97706; /* Amber 600 */
            --color-habit-plant-pot: #A16207; /* Yellow 700 */
            --color-habit-plant-stem: #38A169; /* Green 600 */
            --color-habit-plant-leaf: #4ADE80; /* Green 400 */
            --color-habit-mood-bg: #F3F4F6; /* Gray 100 */
            --color-habit-log-entry-bg: #FFFBEB; /* Lighter yellow for log entries */

            --color-quest-card-bg: #EFF6FF; /* Blue 50 */
            --color-quest-card-border: #BFDBFE; /* Blue 200 */
            --color-quest-icon-bg: var(--color-primary);
            --color-quest-icon-text: var(--color-white);

            --color-day-toggle-default-bg: #E5E7EB; 
            --color-day-toggle-default-text: var(--color-text-muted);
            --color-day-toggle-completed-bg: var(--color-accent1); 
            --color-day-toggle-completed-text: var(--color-white);

            --color-avatar-bg: var(--color-primary);
            --color-avatar-text: var(--color-white);
            --color-badge-bg: var(--color-accent1); 
            --color-badge-text: var(--color-white);

            --color-chat-message-sent-bg: var(--color-primary);
            --color-chat-message-sent-text: var(--color-white);
            --color-chat-message-received-bg: #E5E7EB; 
            --color-chat-message-received-text: var(--color-text);
            
            --color-template-card-bg: var(--color-white);
            --color-template-category-bg: #E0F2FE; 
            --color-template-category-text: #0C4A6E; 

            --color-tag-bubble-bg: #CCFBF1; 
            --color-tag-bubble-text: #0F766E; 
            --color-tag-bubble-hover-bg: var(--color-accent1); 
            --color-tag-bubble-hover-text: var(--color-white);
            --color-tag-pill-bg: #E0F2FE; /* Sky 100 */
            --color-tag-pill-text: #0C4A6E; /* Sky 800 */
            --color-tag-pill-border: #7DD3FC; /* Sky 300 */

            --color-module-pending-border: var(--color-border);
            --color-module-completed-border: var(--color-accent1); 
            --color-module-verified-border: var(--color-success); 
            --color-module-bg: var(--color-surface);
            
            --color-journey-item-bg: var(--color-surface);
            --color-journey-item-border: var(--color-primary);
            --color-journey-progress-bar-bg: var(--color-accent1);
            --color-journey-progress-container-bg: #E0E7FF; /* Indigo 100 for contrast */
            --color-journey-map-bg: linear-gradient(180deg, #4A00E0 0%, #8E2DE2 100%); /* Deep space purple */
            --color-journey-cloud: rgba(255, 255, 255, 0.15);
            --color-journey-island-bg: linear-gradient(145deg, #60A5FA, #3B82F6); /* Icy blue */
            --color-journey-island-border: #93C5FD;
            --color-journey-island-text: var(--color-white);
            --color-journey-path-segment: rgba(255,255,255,0.3);


            --color-primary-darker: #2563EB; 
            --color-primary-shadow: rgba(59, 130, 246, 0.3);
            --color-accent2-darker: #D97706; 
            --color-accent2-shadow: rgba(245, 158, 11, 0.3);
            --color-danger-shadow: rgba(220, 38, 38, 0.3);

            --font-family-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            
            --border-radius-sm: 6px; /* Increased for softer feel */
            --border-radius-md: 12px; /* Increased for softer feel */
            --border-radius-lg: 20px; /* Increased for softer feel */
            --border-radius-pill: 9999px;

            --shadow-sm: 0 2px 4px rgba(0,0,0,0.04); /* Softer shadow */
            --shadow-md: 0 5px 10px -2px rgba(0,0,0,0.07), 0 3px 6px -2px rgba(0,0,0,0.05); /* Softer shadow */
            --shadow-lg: 0 12px 20px -5px rgba(0,0,0,0.08), 0 5px 10px -3px rgba(0,0,0,0.05); /* Softer shadow */
            --shadow-xl: 0 22px 30px -7px rgb(0 0 0 / 0.1), 0 10px 15px -8px rgb(0 0 0 / 0.1); /* Softer shadow */
        }

        .dark-mode-active {
            --color-bg: #111827; 
            --color-surface: #1F2937; 
            --color-text: #F3F4F6; 
            --color-text-muted: #9CA3AF; 
            --color-border: #374151;
            
            --color-auth-illust-bg: #1F2937;
            --color-auth-form-bg: #111827;

            --color-habit-card-bg: #4B5563; /* Gray 600 */
            --color-habit-card-border: #6B7280; /* Gray 500 */
            --color-habit-action-button-bg: #374151; /* Gray 700 */
            --color-habit-action-button-text: #FDE68A;
            --color-habit-log-entry-bg: #374151;
            --habit-name-color-dark: #FEF3C7; /* Amber 100 */
            --habit-desc-color-dark: #FDE68A; /* Amber 200 */

            --color-quest-card-bg: #1E3A8A; 
            --color-quest-card-border: #172C66;
            
            --color-daily-quest-bg: #0C4A6E; 
            --color-daily-quest-text: #E0F2FE; 
            --color-journey-item-bg: #273344;
            --color-journey-progress-container-bg: #374151;
            --color-journey-map-bg: linear-gradient(180deg, #1F2937 0%, #111827 100%);
            --color-journey-cloud: rgba(255, 255, 255, 0.08);
            --color-journey-island-bg: linear-gradient(145deg, #374151, #1F2937); 
            --color-journey-island-border: #4B5563;
        }


        @keyframes fadeInUp { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.4); } 70% { box-shadow: 0 0 0 10px rgba(59, 130, 246, 0); } 100% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0); } }
        @keyframes growAndFadeIn {
            0% { opacity: 0; transform: scale(0.8) translateY(10px); }
            100% { opacity: 1; transform: scale(1) translateY(0); }
        }
        @keyframes subtleBob {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-3px); }
        }
        @keyframes typing-bounce {
            0%, 80%, 100% { transform: scale(0); } 
            40% { transform: scale(1.0); }
        }


        .staggered-animation-container > * { opacity: 0; animation: fadeInUp 0.5s ease-out forwards; }
        .staggered-animation-container > *:nth-child(1) { animation-delay: 0.05s; }
        .staggered-animation-container > *:nth-child(2) { animation-delay: 0.1s; }
        .staggered-animation-container > *:nth-child(3) { animation-delay: 0.15s; }
        .staggered-animation-container > *:nth-child(4) { animation-delay: 0.2s; }
        .staggered-animation-container > *:nth-child(5) { animation-delay: 0.25s; }

        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body { font-family: var(--font-family-sans); background-color: var(--color-bg); color: var(--color-text); line-height: 1.6; font-size: 16px; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; overflow-x: hidden; transition: background-color 0.3s, color 0.3s;}
        #root { display: flex; flex-direction: column; min-height: 100vh; }
        .app-shell { display: flex; flex-direction: column; flex-grow: 1; }
        
        .page-container { flex-grow: 1; display: flex; flex-direction: column; padding: 20px; max-width: 900px; margin: 0 auto; width: 100%; }
        .page-header { margin-bottom: 30px; text-align: center; border-bottom: 1px solid var(--color-border); padding-bottom: 20px; }
        .page-header h1 { color: var(--color-primary); font-size: 2rem; }
        .page-header p { font-size: 1.1rem; color: var(--color-text-muted); max-width: 600px; margin: 10px auto 0 auto; }
        .page-header-extra, .page-header-actions { margin-top: 10px; }
        .page-content { background-color: var(--color-surface); padding: 30px; border-radius: var(--border-radius-lg); box-shadow: var(--shadow-md); flex-grow: 1; }
        .page-content-inner { padding-top: 10px; flex-grow: 1; }
        .embedded-page-content { padding: 20px; flex-grow: 1; display: flex; flex-direction: column; min-height: 0; }
        .embedded-page-content .page-header { margin-bottom: 20px; padding-bottom: 15px; }
        .embedded-page-content .page-header h1 { font-size: 1.8rem; }

        .welcome-page { min-height: 100vh; display: flex; align-items: center; justify-content: center; text-align: center; padding: 30px; background: linear-gradient(135deg, var(--color-bg) 0%, #E0F2FE 100%); position: relative; overflow: hidden; color: var(--color-text); }
        .welcome-content-wrapper { background-color: rgba(255, 255, 255, 0.9); backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px); padding: 40px; border-radius: var(--border-radius-lg); box-shadow: var(--shadow-lg); max-width: 700px; width: 100%; z-index: 1; animation: fadeInUp 0.6s ease-out forwards; position:relative; }
        .welcome-logo { display: flex; align-items: center; justify-content: center; gap: 10px; margin-bottom: 25px; }
        /* .welcome-logo-icon { font-size: 2.8rem; color: var(--color-primary); } */
        .welcome-logo-text { font-size: 2.5rem; font-weight: 700; color: var(--color-primary); }
        .welcome-headline { font-size: 2.5rem; font-weight: 700; color: var(--color-text); margin-bottom: 15px; }
        .welcome-tagline { font-size: 1.15rem; color: var(--color-text-muted); line-height: 1.7; margin-bottom: 30px; max-width: 550px; margin-left: auto; margin-right: auto; }
        .welcome-key-features { display: flex; justify-content: space-around; gap: 20px; margin-bottom: 35px; flex-wrap: wrap; }
        .welcome-feature-item { text-align: center; flex-basis: 150px; }
        .welcome-feature-item .feature-icon { font-size: 2rem; color: var(--color-accent1); display: block; margin-bottom: 8px; }
        .welcome-feature-item p { font-size: 0.95rem; color: var(--color-text); font-weight: 500; margin-bottom: 0; }
        .welcome-actions { display: flex; justify-content: center; gap: 15px; flex-wrap: wrap; }
        .btn-welcome-action { padding: 14px 28px; font-size: 1.05rem; min-width: 220px; }
        .welcome-bg-elements { position: absolute; top: 0; left: 0; right: 0; bottom: 0; pointer-events: none; z-index: 0; }
        .bg-shape { position: absolute; border-radius: 50%; opacity: 0.15; background-color: var(--color-primary); }
        .bg-shape.shape1 { width: 200px; height: 200px; top: 10%; left: 5%; animation: float 8s ease-in-out infinite; }
        .bg-shape.shape2 { width: 150px; height: 150px; bottom: 15%; right: 10%; background-color: var(--color-accent1); animation: float 10s ease-in-out infinite reverse; }
        .bg-shape.shape3 { width: 100px; height: 100px; top: 30%; right: 25%; background-color: var(--color-accent2); animation: float 6s ease-in-out infinite; }
        @keyframes float { 0% { transform: translateY(0px); } 50% { transform: translateY(-20px); } 100% { transform: translateY(0px); } }
        
        .auth-layout { display: flex; min-height: 100vh; width: 100%; }
        .auth-illustration-panel { flex: 0 0 40%; background-color: var(--color-auth-illust-bg); color: var(--color-auth-illust-text); padding: 40px; display: flex; flex-direction: column; justify-content: space-between; position: relative; overflow: hidden; }
        .auth-illustration-panel-content { display: flex; flex-direction: column; gap: 40px; margin: auto 0; }
        .auth-logo-area { display: flex; align-items: center; gap: 10px; }
        /* .auth-logo-icon { font-size: 2rem; } */
        .auth-logo-text { font-size: 1.8rem; font-weight: 700; }
        .auth-illustration-headlines h1 { font-size: 2.2rem; font-weight: 700; margin-bottom: 10px; }
        .auth-illustration-headlines p { font-size: 1rem; line-height: 1.6; opacity: 0.9; }
        .auth-illustrative-cards-section { display: flex; flex-direction: column; gap: 20px; }
        .auth-illustrative-cards-section.auth-signup-carousel { position: relative; min-height: 180px; } 

        .auth-illustration-ui-card { background-color: var(--color-auth-illust-card-bg); border: 1px solid var(--color-auth-illust-card-border); padding: 20px; border-radius: var(--border-radius-md); box-shadow: var(--shadow-sm); }
        .auth-illustration-ui-card h4 { font-size: 1.1rem; font-weight: 600; margin-bottom: 8px; }
        .auth-illustration-ui-card p { font-size: 0.85rem; opacity: 0.8; margin-bottom: 15px; }
        .auth-illustration-ui-card p:last-child { margin-bottom: 0; }
        
        .dynamic-signup-card {
            position: absolute; top: 0; left: 0; width: 100%;
            opacity: 0; transform: translateY(20px) scale(0.95);
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
            border-left: 5px solid var(--card-accent-color, var(--color-accent1));
        }
        .dynamic-signup-card.active { opacity: 1; transform: translateY(0) scale(1); }
        .dynamic-card-icon { font-size: 1.8rem; display: block; margin-bottom: 10px; color: var(--card-accent-color, var(--color-accent1)); }
        
        .mock-ui-element { font-size: 0.8rem; }
        .progress-bar-mock span { display: block; margin-bottom: 5px; font-weight: 500;}
        .progress-bar-bg { background-color: rgba(0,0,0,0.2); border-radius: var(--border-radius-sm); height: 8px; overflow: hidden;}
        .progress-bar-fill { background-color: var(--color-accent1); height: 100%; border-radius: var(--border-radius-sm);}
        .avatars-mock { display: flex; align-items: center; gap: 8px; }
        .avatar-placeholder-sm { width: 30px; height: 30px; background-color: rgba(255,255,255,0.3); border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; font-size: 0.9rem; }
        .avatar-placeholder-sm.highlighted { border: 2px solid var(--color-accent1); }
        .chat-bubble-mock { background-color: var(--color-accent1); color: var(--color-text); padding: 5px 10px; border-radius: var(--border-radius-sm); font-size: 0.75rem; }
        .decorative-bg-dots { position: absolute; bottom: -50px; left: -50px; width: 200px; height: 200px; background-image: radial-gradient(circle, rgba(255,255,255,0.08) 2px, transparent 2px); background-size: 20px 20px; opacity: 0.7; z-index: 0; }
        .auth-illustration-panel-content { position: relative; z-index: 1; }
        .auth-form-panel { flex: 1 1 60%; background-color: var(--color-auth-form-bg); padding: 30px 40px; display: flex; flex-direction: column; justify-content: center; position: relative; overflow-y: auto; }
        .auth-form-panel-header { text-align: right; margin-bottom: auto; padding-top: 10px; font-size: 0.9rem; }
        .auth-form-panel-content { max-width: 450px; width: 100%; margin: auto; }
        .auth-form-intro h2 { font-size: 1.8rem; font-weight: 700; color: var(--color-text); margin-bottom: 10px; text-align: left; }
        .auth-form-intro p { font-size: 0.95rem; color: var(--color-text-muted); margin-bottom: 25px; text-align: left; }
        .error-message-box { background-color: var(--color-danger-bg); border: 1px solid var(--color-danger); color: var(--color-danger-dark); padding: 12px 15px; border-radius: var(--border-radius-md); margin-bottom: 20px; display: flex; align-items: center; gap: 10px; font-size: 0.9rem; }
        .error-icon { font-weight: bold; }
        .auth-form-main .form-group { margin-bottom: 18px; }
        .auth-form-main .form-group label { font-size: 0.875rem; color: var(--color-text-muted); font-weight: 500; }
        .form-group-extra-links { text-align: right; font-size: 0.875rem; margin-top: -10px; margin-bottom: 18px; }
        .form-group-extra-links .btn-link { font-size: 0.875rem; }
        .password-form-group .password-input-wrapper { position: relative; }
        .password-form-group .password-toggle-btn { position: absolute; top: 50%; right: 12px; transform: translateY(-50%); background: none; border: none; cursor: pointer; font-size: 1.2rem; color: var(--color-text-muted); padding: 0; }
        .password-toggle-btn:hover { color: var(--color-text); }
        .password-reqs-list { list-style: none; padding: 0; margin: -5px 0 20px 0; display: grid; grid-template-columns: 1fr 1fr; gap: 5px 10px; font-size: 0.75rem; color: var(--color-text-muted); }
        .password-reqs-list li { display: flex; align-items: center; gap: 5px; }
        .password-reqs-list li span[aria-hidden="true"] { color: var(--color-success); font-weight: bold;}
        .btn-auth-action { padding: 14px 24px; font-size: 1rem; }
        .auth-legal-links { text-align: center; font-size: 0.8rem; color: var(--color-text-muted); margin-top: 25px; }
        .auth-legal-links a { color: var(--color-primary); text-decoration: underline; }
        .auth-legal-links a:hover { color: var(--color-primary-darker); }
        .btn-back-to-welcome { display: block; margin: 20px auto 0 auto; max-width: 200px; }
        .auth-fab-group { position: fixed; bottom: 20px; right: 20px; display: flex; flex-direction: column; gap: 10px; z-index: 1000; }
        .auth-fab-button { background-color: var(--color-white); color: var(--color-primary); border: 1px solid var(--color-border); border-radius: 50%; width: 50px; height: 50px; display: flex; align-items: center; justify-content: center; box-shadow: var(--shadow-md); cursor: pointer; font-size: 1.5rem; transition: background-color 0.2s, box-shadow 0.2s; }
        .auth-fab-button:hover { background-color: var(--color-surface); box-shadow: var(--shadow-lg); }

        .main-home-layout { display: flex; min-height: 100vh; }
        .left-sidebar { width: 260px; background-color: var(--color-sidebar-bg); color: var(--color-sidebar-text); padding: 20px; display: flex; flex-direction: column; flex-shrink: 0; transition: width 0.3s ease; position: fixed; top: 0; left: 0; height: 100vh; z-index: 1001; overflow-y: auto; }
        .sidebar-logo-area { display: flex; align-items: center; gap: 10px; padding-bottom: 20px; margin-bottom: 20px; border-bottom: 1px solid rgba(255,255,255,0.1); }
        /* .sidebar-logo-icon { font-size: 1.8rem; color: var(--color-accent1); } */
        .sidebar-logo-text { font-size: 1.5rem; font-weight: 700; color: var(--color-white); }
        .sidebar-nav ul { list-style: none; padding: 0; margin: 0; }
        .sidebar-nav-item { display: flex; align-items: center; gap: 12px; padding: 12px 15px; border-radius: var(--border-radius-md); color: var(--color-sidebar-text); text-decoration: none; font-weight: 500; margin-bottom: 8px; cursor: pointer; background: none; border: none; width: 100%; text-align: left; font-size: 0.95rem; transition: background-color 0.2s, color 0.2s; }
        .sidebar-nav-item:hover { background-color: var(--color-sidebar-hover-bg); color: var(--color-white); }
        .sidebar-nav-item.active { background-color: var(--color-sidebar-active-bg); color: var(--color-sidebar-active-text); font-weight: 600; }
        .sidebar-nav-icon { font-size: 1.2rem; width: 20px; text-align: center; }

        .center-content-area { flex-grow: 1; padding: 25px; background-color: var(--color-bg); overflow-y: auto; margin-left: 260px; }
        
        .main-content-header { margin-bottom: 25px; }
        .main-content-header h1 { font-size: 2rem; color: var(--color-text); margin-bottom: 5px; }
        .main-content-header .welcome-time-greeting { font-weight: normal; color: var(--color-text-muted); font-size: 1.5rem; }
        .main-content-header p { font-size: 1.1rem; color: var(--color-text-muted); }
        
        /* === Reimagined Dashboard === */
        .main-dashboard-reimagined {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }
        .dashboard-section-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--color-text);
            padding-bottom: 10px;
            border-bottom: 2px solid var(--color-border);
            margin: 10px 0 0 0;
        }

        .dashboard-hero-card {
            background: linear-gradient(135deg, var(--color-primary), var(--color-accent1));
            color: var(--color-white);
            padding: 30px;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-lg);
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
            animation: fadeInUp 0.5s ease-out;
        }
        .hero-text-content h3 {
            font-size: 1.8rem;
            font-weight: 700;
            margin: 0 0 5px 0;
        }
        .hero-text-content p {
            font-size: 1rem;
            opacity: 0.9;
            margin: 0;
            max-width: 400px;
        }
        .dashboard-hero-card .btn {
            padding: 14px 28px;
            font-size: 1.1rem;
            flex-shrink: 0;
            background-color: var(--color-white);
            color: var(--color-primary);
            border: none;
        }
        .dashboard-hero-card .btn:hover {
            background-color: #f0f0f0;
        }
        .dashboard-hero-card .btn.btn-success {
            background-color: var(--color-success);
            color: white;
        }


        .dashboard-stats-grid-reimagined {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            animation: fadeInUp 0.5s 0.1s ease-out forwards;
            opacity: 0;
        }

        .stat-card-reimagined {
            background-color: var(--color-surface);
            padding: 20px;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-md);
            display: flex;
            align-items: center;
            gap: 15px;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .stat-card-reimagined:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }
        .stat-card-icon {
            font-size: 2rem;
            color: var(--color-primary);
            background-color: #EFF6FF; /* Blue 50 */
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        .stat-card-info {
            display: flex;
            flex-direction: column;
        }
        .stat-card-value {
            font-size: 1.6rem;
            font-weight: 700;
            color: var(--color-text);
            line-height: 1.2;
        }
        .stat-card-label {
            font-size: 0.9rem;
            color: var(--color-text-muted);
        }
        .stat-card-context {
            font-size: 0.8rem;
            color: var(--color-text-muted);
            margin-left: auto;
            align-self: flex-end;
            font-style: italic;
            text-align: right;
        }

        .shared-xp-stat-card {
            flex-direction: column;
            align-items: flex-start;
        }
        .shared-xp-bar-container-reimagined {
            width: 100%;
            height: 12px;
            background-color: var(--color-border);
            border-radius: var(--border-radius-pill);
            overflow: hidden;
            margin: 10px 0 5px 0;
            position: relative;
        }
        .shared-xp-bar-segment-reimagined.user {
            height: 100%;
            background-color: var(--color-primary);
            border-radius: var(--border-radius-pill);
        }
        .xp-labels-reimagined {
            width: 100%;
            display: flex;
            justify-content: space-between;
            font-size: 0.85rem;
            color: var(--color-text-muted);
        }


        .dashboard-missions-grid-reimagined {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            animation: fadeInUp 0.5s 0.2s ease-out forwards;
            opacity: 0;
        }

        .mission-card-reimagined {
            background-color: var(--color-surface);
            padding: 20px;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-md);
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .mission-card-reimagined h4 {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--color-primary);
            margin: 0;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .weekly-quest-reimagined {
            background-color: var(--color-daily-quest-bg);
            border: 1px solid var(--color-daily-quest-border);
        }
        .mission-content {
            background-color: rgba(255,255,255,0.7);
            padding: 12px;
            border-radius: var(--border-radius-md);
            flex-grow: 1;
        }
        .mission-title {
            font-weight: 600;
            color: var(--color-text);
            margin-bottom: 5px;
        }
        .mission-description {
            font-size: 0.9rem;
            color: var(--color-text-muted);
        }
        .weekly-quest-reimagined .btn {
            align-self: flex-start;
        }


        .milestone-preview-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
            flex-grow: 1;
        }
        .milestone-preview-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px;
            background-color: var(--color-bg);
            border-radius: var(--border-radius-md);
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .milestone-preview-item:hover {
            background-color: var(--color-border);
        }
        .milestone-preview-emoji {
            font-size: 1.5rem;
        }
        .milestone-preview-info {
            flex-grow: 1;
        }
        .milestone-preview-title {
            font-weight: 500;
            font-size: 0.95rem;
            color: var(--color-text);
        }
        .milestone-preview-progress-bar-container {
            height: 6px;
            background-color: #e0e0e0;
            border-radius: var(--border-radius-pill);
            overflow: hidden;
            margin-top: 4px;
        }
        .milestone-preview-progress-bar {
            height: 100%;
            background-color: var(--color-accent1);
        }
        .milestone-preview-percent {
            font-weight: 600;
            font-size: 0.9rem;
            color: var(--color-accent1);
        }
        .preview-empty-text {
            font-size: 0.9rem;
            color: var(--color-text-muted);
            text-align: center;
            padding: 20px;
            font-style: italic;
        }

        .dashboard-section h2 { font-size: 1.5rem; color: var(--color-text); margin-bottom: 15px; border-bottom: 1px solid var(--color-border); padding-bottom: 8px; }
        
        .bot-buddy-status-widget {
            background-color: var(--color-info-bg);
            border: 1px solid var(--color-info-border);
            color: var(--color-info);
            padding: 12px 15px;
            border-radius: var(--border-radius-md);
            text-align: center;
            font-weight: 500;
        }
        
        .loading-spinner-container.small-spinner { padding: 10px; }
        .loading-spinner-container.small-spinner .loading-spinner { width: 30px; height: 30px; border-width: 3px; margin-bottom: 8px;}
        .loading-spinner-container.small-spinner p { font-size: 0.9rem; }
        
        .quest-related-goal { font-size: 0.85rem; color: var(--color-text-muted); font-style: italic; margin-top: 5px; }


        .right-panel { width: 300px; background-color: var(--color-surface); border-left: 1px solid var(--color-border); padding: 20px; flex-shrink: 0; transition: width 0.3s ease, padding 0.3s ease, opacity 0.3s ease; overflow-y: auto; position: relative; }
        .right-panel.collapsed { width: 50px; padding: 20px 0; } 
        .right-panel.collapsed .right-panel-content { display: none; }
        .right-panel-toggle { position: absolute; top: 15px; left: 0; transform: translateX(-50%); background-color: var(--color-primary); color: var(--color-white); border: none; border-radius: var(--border-radius-md) 0 0 var(--border-radius-md); padding: 8px 6px; cursor: pointer; font-size: 1rem; z-index: 10; line-height: 1; }
        .right-panel.collapsed .right-panel-toggle { border-radius: var(--border-radius-md); left: 50%; }
        .right-panel-content { }
        .widget { margin-bottom: 20px; }
        .widget h3 { font-size: 1.1rem; color: var(--color-primary); margin-bottom: 10px; padding-bottom: 5px; border-bottom: 1px solid var(--color-border); }
        .widget-content-placeholder { font-size: 0.9rem; color: var(--color-text-muted); font-style: italic; }

        .goals-content-area { padding-top: 10px; }
        .goals-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .goal-card { background-color: var(--color-surface); border-radius: var(--border-radius-lg); box-shadow: var(--shadow-md); padding: 20px; display: flex; flex-direction: column; transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out; }
        .goal-card:hover { transform: translateY(-5px); box-shadow: var(--shadow-lg); }
        .goal-card-header { display: flex; align-items: center; gap: 12px; margin-bottom: 10px; }
        .goal-card-icon { font-size: 2rem; color: var(--color-primary); flex-shrink: 0; }
        .goal-card h3 { font-size: 1.25rem; color: var(--color-text); margin: 0; font-weight: 600; }
        .goal-card-category { display: inline-block; background-color: var(--color-accent1); color: var(--color-white); padding: 3px 8px; border-radius: var(--border-radius-sm); font-size: 0.75rem; font-weight: 500; margin-bottom: 10px; align-self: flex-start; }
        .goal-card-status { font-size: 0.9rem; color: var(--color-text-muted); margin-bottom: 12px; flex-grow: 1; }
        .goal-card-progress-bar-container { height: 10px; background-color: var(--color-border); border-radius: var(--border-radius-sm); overflow: hidden; margin-bottom: 15px; }
        .goal-card-progress-bar { height: 100%; background-color: var(--color-primary); border-radius: var(--border-radius-sm); transition: width 0.3s ease; }
        .goal-card-actions { display: flex; gap: 10px; margin-top: auto; }
        .goal-card-actions .btn-sm { flex-grow: 1; }
        .goals-empty-state { text-align: center; padding: 40px 20px; background-color: #E5E7EB; border-radius: var(--border-radius-lg); margin-top: 20px; animation: fadeInUp 0.5s ease-out; position: relative; }
        .goals-empty-icon { font-size: 4rem; color: var(--color-accent1); display: block; margin-bottom: 20px; }
        .goals-empty-state h2 { font-size: 1.8rem; color: var(--color-primary); margin-bottom: 10px; }
        .goals-empty-state p { font-size: 1.1rem; color: var(--color-text-muted); max-width: 450px; margin: 0 auto 25px auto; }
        .add-new-goal-button-container { text-align: center; margin-top: 10px; padding-bottom: 20px; }
        .btn-lg { padding: 15px 30px; font-size: 1.1rem; }

        .goal-progress-view-page .page-header p { font-size: 1rem; color: var(--color-text-muted); }
        .goal-progress-view-page .goal-card-progress-bar-container { background-color: var(--color-border); }
        .goal-progress-view-page .goal-card-progress-bar { background-color: var(--color-success); display: flex; align-items: center; justify-content: center; color: var(--color-white); font-size: 0.8rem; font-weight: 600; }
         .btn-success { background-color: var(--color-success); color: var(--color-white); border-color: var(--color-success); }
        .btn-success:hover { background-color: #059669; border-color: #059669; }
        .goal-modules-section { margin-top: 30px; }
        .goal-modules-section h2 { font-size: 1.4rem; color: var(--color-primary); margin-bottom: 15px; border-bottom: 1px solid var(--color-border); padding-bottom: 8px; }
        .goal-modules-list { list-style: none; padding: 0; display: flex; flex-direction: column; gap: 12px; }
        .goal-module-item { background-color: var(--color-module-bg); padding: 15px; border-radius: var(--border-radius-md); border-left: 5px solid var(--color-module-pending-border); box-shadow: var(--shadow-sm); display: flex; align-items: center; justify-content: space-between; gap: 15px; transition: border-color 0.3s ease, background-color 0.3s ease; }
        .goal-module-item.status-completed:not(.verified-true) { border-left-color: var(--color-module-completed-border); background-color: #F0FDFA; }
        .goal-module-item.verified-true { border-left-color: var(--color-module-verified-border); background-color: #ECFDF5; }
        .module-status-icon { font-size: 1.2rem; flex-shrink: 0; }
        .goal-module-item.verified-true .module-status-icon { color: var(--color-success); }
        .goal-module-item.status-completed:not(.verified-true) .module-status-icon { color: var(--color-accent1); }
        .goal-module-item.status-pending .module-status-icon { color: var(--color-text-muted); }
        .module-name { font-weight: 500; flex-grow: 1; }
        .module-actions { display: flex; gap: 10px; align-items: center; flex-shrink: 0; }
        .module-verified-text { font-size: 0.85rem; font-weight: 600; }
        .goal-module-item.verified-true .module-verified-text { color: var(--color-success); }
        .goal-module-item.status-completed:not(.verified-true) .module-verified-text { color: var(--color-accent1); }

        .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(0, 0, 0, 0.6); display: flex; align-items: center; justify-content: center; z-index: 2000; padding: 20px; animation: fadeIn 0.3s ease-out; }
        .modal-content { background-color: var(--color-surface); padding: 25px 30px; border-radius: var(--border-radius-lg); box-shadow: var(--shadow-xl); width: 100%; max-width: 550px; position: relative; animation: growAndFadeIn 0.35s 0.05s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; opacity: 0; }
        .modal-close-btn { position: absolute; top: 12px; right: 15px; background: none; border: none; font-size: 2rem; color: var(--color-text-muted); cursor: pointer; padding: 5px; line-height: 1; }
         .modal-close-btn:hover { color: var(--color-text); }
        .modal-content h2 { font-size: 1.6rem; color: var(--color-primary); margin-top: 0; margin-bottom: 20px; text-align: center; display:flex; align-items:center; justify-content:center; gap: 10px; }
        .modal-content .form-group label { font-size: 0.95rem; color: var(--color-text-muted); }
        .modal-content textarea.form-control { min-height: 100px; font-size: 1rem; padding: 12px; background-color: #F9FAFB; }
        
        .ai-question-text, .ai-gentle-prompt { font-size: 1rem; color: var(--color-text); margin-bottom: 20px; padding: 12px 15px; background-color: var(--color-info-bg); border-left: 4px solid var(--color-info-border); border-radius: var(--border-radius-md); font-style: italic; }
        .ai-question-text strong { color: var(--color-primary); }
        .modal-content textarea#userAnswerAI { min-height: 120px; font-size: 1rem; padding: 12px; }
        .modal-actions { display: flex; flex-direction: column; gap: 12px; margin-top: 25px; }
        .modal-actions .btn { width: 100%; padding-top: 12px; padding-bottom: 12px; font-size: 1.05rem; }
        
        .loading-spinner-container { text-align: center; padding: 25px; }
        .loading-spinner { border: 5px solid var(--color-border); border-top: 5px solid var(--color-primary); border-radius: 50%; width: 45px; height: 45px; animation: spin 0.8s linear infinite; margin: 0 auto 15px auto; }
        .loading-spinner-container p { font-size: 1rem; color: var(--color-text-muted); }
        .ai-feedback-section { padding: 18px 20px; margin-top: 20px; background-color: var(--color-success-bg); border-left: 5px solid var(--color-success); border-radius: var(--border-radius-md); text-align: center; }
        .ai-feedback-section p { margin-bottom: 8px; color: var(--color-success-dark); font-weight: 500; font-size: 1.05rem; }
        .ai-feedback-section p:last-child { margin-bottom: 0; }

        /* Habit Tracker Redesign Styles */
        .buddy-alert-bar {
            padding: 10px 15px;
            border-radius: var(--border-radius-md);
            margin-bottom: 20px;
            text-align: center;
            font-size: 0.9rem;
            font-weight: 500;
        }
        .buddy-alert-bar.success { background-color: var(--color-success-bg); color: var(--color-success-dark); border: 1px solid var(--color-success); }
        .buddy-alert-bar.warning { background-color: var(--color-warning-bg); color: var(--color-warning-dark); border: 1px solid var(--color-warning); }

        .habit-tracker-page-content .page-header-actions { margin-bottom: 20px; } 
        .habits-list { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 25px; margin-top: 10px; }
        
        .habit-item-card {
            background-color: var(--color-habit-card-bg);
            border: 1px solid var(--color-habit-card-border);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-md);
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            animation: growAndFadeIn 0.4s ease-out;
            position: relative;
        }
        .habit-item-card:hover { transform: translateY(-4px); box-shadow: var(--shadow-lg); }
        .habit-header { display: flex; align-items: flex-start; gap: 15px; }
        .habit-icon-bg {
            font-size: 1.8rem;
            background-color: var(--color-white);
            color: var(--color-primary);
            width: 50px; height: 50px;
            border-radius: var(--border-radius-md);
            display: inline-flex; align-items: center; justify-content: center;
            flex-shrink: 0;
            box-shadow: var(--shadow-sm);
        }
        .habit-info { flex-grow: 1; }
        .habit-name { font-size: 1.3rem; font-weight: 600; color: #78350F; /* Amber 800 */ margin: 0 0 4px 0; }
        .habit-goal-desc { font-size: 0.9rem; color: #B45309; /* Amber 700 */ margin: 0; }
        
        .habit-visuals { display: flex; justify-content: space-between; align-items: center; margin: 0; padding: 10px 0; border-top: 1px dashed #FDBA74; border-bottom: 1px dashed #FDBA74; }
        .streak-visual-container { text-align: left; }
        .streak-visual { display: flex; align-items: center; gap: 5px; }
        .streak-icon { font-size: 1.5rem; line-height: 1; }
        .streak-count { font-size: 1.8rem; font-weight: 700; color: #78350F; }
        .streak-text { font-size: 0.8rem; color: #B45309; margin: 0; }

        .shared-xp-daily { width: 120px; }
        .shared-xp-daily-labels { display: flex; justify-content: space-between; font-size: 0.75rem; color: #B45309; margin-bottom: 4px; padding: 0 2px; }
        .shared-xp-daily-bar { position: relative; height: 12px; background-color: #FEF3C7; border-radius: var(--border-radius-pill); overflow: hidden; border: 1px solid #FDE68A;}
        .shared-xp-daily-user { position: absolute; top: 0; left: 0; height: 100%; background-color: var(--color-accent2); z-index: 2; border-radius: var(--border-radius-pill); }
        .shared-xp-daily-buddy { position: absolute; top: 0; left: 0; height: 100%; background-color: var(--color-accent1); opacity: 0.6; z-index: 1; }


        .habit-completion-section { padding: 10px; background: #FFFBEB; border-radius: var(--border-radius-md); }
        .completion-display { text-align: center; }
        .completion-display p { font-size: 0.9rem; color: #78350F; }
        .proof-item { display: flex; align-items: center; gap: 8px; background-color: var(--color-white); padding: 8px; border-radius: var(--border-radius-md); margin: 8px 0; box-shadow: var(--shadow-sm); }
        .proof-icon { font-size: 1.2rem; }
        .proof-type-text { font-weight: 500; text-transform: capitalize; color: #B45309; }
        .proof-thumbnail { width: 40px; height: 40px; object-fit: cover; border-radius: var(--border-radius-sm); border: 1px solid var(--color-border); }
        .proof-link { font-size: 0.8rem; color: var(--color-primary); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .proof-comment { font-size: 0.85rem; color: var(--color-text-muted); background-color: #F9FAFB; padding: 5px; border-radius: var(--border-radius-sm); margin-top: 5px; }

        .completion-actions { display: flex; flex-direction: column; gap: 10px; }
        .completion-method { display: flex; align-items: center; gap: 8px; }
        .completion-method .form-control-sm { padding: 6px 10px; font-size: 0.85rem; flex-grow: 1; }
        .completion-method .btn-sm { flex-shrink: 0; }
        .proof-preview { display: flex; align-items: center; gap: 8px; margin-left: 10px; }
        
        .optional-comment-section { margin-top: 10px; text-align: center; }
        .optional-comment-section .btn-link { font-size: 0.85rem; color: #B45309; }
        .optional-comment-section textarea { margin-top: 8px; }

        .habit-footer { padding-top: 10px; border-top: 1px dashed #FDBA74; }
        .streak-freeze-section { display: flex; justify-content: space-between; align-items: center; background-color: var(--color-info-bg); padding: 5px 10px; border-radius: var(--border-radius-md); font-size: 0.85rem; color: var(--color-info); margin-bottom: 10px; }
        .streak-freeze-section .btn-info { background-color: var(--color-info); color: white; padding: 2px 8px; font-size: 0.75rem; }
        .recent-checkins { display: flex; justify-content: space-around; gap: 5px; }
        .checkin-day-icon { font-size: 1.2rem; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; background-color: #FEF3C7; border-radius: 50%; border: 1px solid #FDE68A; }


        .habit-empty-state { text-align: center; padding: 40px 20px; background-color: var(--color-habit-card-bg); border: 2px dashed var(--color-habit-card-border); border-radius: var(--border-radius-lg); margin-top: 20px; animation: fadeInUp 0.5s ease-out; position: relative;}
        .habit-empty-icon { font-size: 4rem; color: var(--color-accent2); display: block; margin-bottom: 20px; }
        .habit-empty-state h2 { font-size: 1.8rem; color: #78350F; margin-bottom: 10px; }
        .habit-empty-state p { font-size: 1.1rem; color: #B45309; max-width: 500px; margin: 0 auto 25px auto; }
        
        /* --- Goal to Habit Linking --- */
        .link-habit-modal .habit-list { max-height: 300px; overflow-y: auto; padding: 10px; background-color: var(--color-bg); border-radius: var(--border-radius-md); }
        .habit-list-item { display: flex; align-items: center; padding: 12px; border-radius: var(--border-radius-sm); cursor: pointer; transition: background-color 0.2s; }
        .habit-list-item:hover { background-color: var(--color-border); }
        .habit-list-item-emoji { font-size: 1.5rem; margin-right: 12px; }
        .habit-list-item-name { font-weight: 500; }
        .linked-habit-preview { background-color: var(--color-info-bg); border: 1px solid var(--color-info-border); padding: 15px; border-radius: var(--border-radius-md); margin: 20px 0; }
        .linked-habit-preview h4 { margin-top: 0; color: var(--color-primary); font-size: 1rem; }
        .linked-habit-content { display: flex; align-items: center; gap: 10px; }
        .linked-habit-emoji { font-size: 1.5rem; }
        .linked-habit-name { flex-grow: 1; font-weight: 500; }
        .linked-habit-streak { font-weight: 600; color: var(--color-accent2); font-size: 1.1rem; }
        .linked-goal-badge { position: absolute; top: 10px; right: 10px; background-color: var(--color-primary); color: white; border-radius: 50%; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; font-size: 0.9rem; box-shadow: var(--shadow-sm); }
        
        /* --- Profile Page Stats --- */
        .xp-progress-bar-container { width: 100%; height: 12px; background-color: var(--color-border); border-radius: var(--border-radius-pill); overflow: hidden; margin: 10px 0 5px 0; }
        .xp-progress-bar { height: 100%; background-color: var(--color-accent2); border-radius: var(--border-radius-pill); transition: width 0.4s ease; }
        .xp-progress-labels { display: flex; justify-content: space-between; font-size: 0.8rem; color: var(--color-text-muted); }
        .unlocked-perks-list { list-style: none; padding: 0; margin-top: 10px; }
        .unlocked-perks-list li { background-color: var(--color-success-bg); color: var(--color-success-dark); padding: 8px 12px; border-radius: var(--border-radius-md); margin-bottom: 8px; font-weight: 500; }
        .activity-heatmap { display: grid; grid-template-columns: repeat(15, 1fr); gap: 4px; padding: 10px; background-color: var(--color-bg); border-radius: var(--border-radius-md); max-width: 350px; margin: 0 auto; }
        .heatmap-day { width: 18px; height: 18px; background-color: #EBEDF0; border-radius: var(--border-radius-sm); }
        .heatmap-day[data-level="1"] { background-color: #EBEDF0; } /* Gray - no activity */
        .heatmap-day[data-level="2"] { background-color: #9BE9A8; } /* Light Green */
        .heatmap-day[data-level="3"] { background-color: #40C463; } /* Medium Green */
        .heatmap-day[data-level="4"] { background-color: #216E39; } /* Dark Green */
        .dark-mode-active .heatmap-day[data-level="1"] { background-color: #374151; }
        .dark-mode-active .heatmap-day[data-level="2"] { background-color: #0E4429; }
        .dark-mode-active .heatmap-day[data-level="3"] { background-color: #006D32; }
        .dark-mode-active .heatmap-day[data-level="4"] { background-color: #26A641; }

        .xp-chart-wrapper { display: flex; justify-content: center; align-items: center; }
        .xp-chart-svg { width: 100%; max-width: 350px; height: auto; }
        
        .profile-stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 15px; text-align: center; }
        .profile-stat-item { padding: 10px; background-color: var(--color-bg); border-radius: var(--border-radius-md); }
        .profile-stat-item .stat-icon { font-size: 2rem; color: var(--color-accent1); display: block; margin-bottom: 5px; }
        .profile-stat-item .stat-value { font-size: 1.5rem; font-weight: 700; color: var(--color-text); display: block; }
        .profile-stat-item .stat-label { font-size: 0.85rem; color: var(--color-text-muted); }
        
        .profile-badges-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); gap: 15px; }
        .profile-badge { display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 15px 10px; border-radius: var(--border-radius-md); text-align: center; transition: transform 0.2s; }
        .profile-badge.unlocked { background-color: var(--color-warning-bg); border: 1px solid var(--color-warning-border); }
        .profile-badge.unlocked:hover { transform: scale(1.05); }
        .profile-badge.locked { background-color: var(--color-border); opacity: 0.7; }
        .profile-badge .badge-icon { font-size: 2.5rem; margin-bottom: 8px; }
        .profile-badge.unlocked .badge-icon { color: var(--color-warning-dark); }
        .profile-badge.locked .badge-icon { filter: grayscale(1); }
        .profile-badge .badge-name { font-size: 0.8rem; font-weight: 600; color: var(--color-text); }
        .profile-badge.locked .badge-name { color: var(--color-text-muted); }
        
        /* --- Dark Mode Toggle --- */
        .dark-mode-toggle-wrapper { position: relative; }
        .dark-mode-toggle-wrapper .switch-toggle input:disabled + .slider { cursor: not-allowed; background-color: #D1D5DB; }
        .dark-mode-toggle-wrapper .switch-toggle input:disabled ~ .tooltip-text { display: none; }
        .dark-mode-toggle-wrapper:hover .tooltip-text { display: block; }
        .tooltip-text { display: none; position: absolute; bottom: 100%; left: 50%; transform: translateX(-50%); margin-bottom: 8px; background-color: #333; color: white; padding: 5px 10px; border-radius: var(--border-radius-sm); font-size: 0.8rem; white-space: nowrap; z-index: 10; }

        .chat-page .page-header-actions { margin-bottom: 0; }
        .chat-layout-container { display: flex; gap: 20px; flex-grow: 1; min-height: 400px; max-height: calc(100vh - 200px); }
        .chat-sidebar { flex: 0 0 300px; background-color: #E5E7EB; border-radius: var(--border-radius-md); padding: 15px; display: flex; flex-direction: column; gap: 20px; overflow-y: auto; }
        .chat-section h4 { font-size: 1.1rem; color: var(--color-primary); margin-bottom: 10px; padding-bottom: 5px; border-bottom: 1px solid var(--color-border); }
        .chat-list { display: flex; flex-direction: column; gap: 10px; }
        .chat-list-item { display: flex; align-items: center; gap: 10px; padding: 10px; border-radius: var(--border-radius-sm); cursor: pointer; transition: background-color 0.2s; }
        .chat-list-item:hover, .chat-list-item.active { background-color: var(--color-border); }
        .chat-avatar { font-size: 1.5rem; background-color: var(--color-avatar-bg); color: var(--color-avatar-text); width: 40px; height: 40px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; flex-shrink: 0; }
        .chat-avatar.group-icon { background-color: var(--color-accent1); }
        .chat-avatar.small-header-avatar { width: 30px; height: 30px; font-size: 1.2rem; margin-right: 8px;}
        .chat-info { flex-grow: 1; overflow: hidden; }
        .chat-name { font-weight: 600; display: block; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .chat-last-message { font-size: 0.85rem; color: var(--color-text-muted); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .unread-indicator { background-color: var(--color-primary); color: var(--color-white); font-size: 0.75rem; padding: 2px 6px; border-radius: 10px; font-weight: bold; margin-left: auto; margin-right: 5px; }
        .chat-time, .chat-members { font-size: 0.75rem; color: var(--color-text-muted); white-space: nowrap; margin-left: 5px;}
        .active-chat-area { flex-grow: 1; background-color: var(--color-surface); border-radius: var(--border-radius-md); box-shadow: var(--shadow-sm); display: flex; flex-direction: column; padding: 0; overflow: hidden; }
        .active-chat-area.detailed { padding: 0; } 
        .active-chat-header { display: flex; align-items: center; padding: 10px 15px; border-bottom: 1px solid var(--color-border); background-color: #F3F4F6; }
        .chat-title { font-size: 1.2rem; font-weight: 600; color: var(--color-text); flex-grow: 1; }
        .chat-actions-placeholder { font-size: 1.5rem; color: var(--color-text-muted); cursor: pointer; padding: 0 5px; }
        .chat-messages-area { flex-grow: 1; padding: 15px; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; }
        .message-bubble { max-width: 75%; padding: 8px 12px; border-radius: var(--border-radius-lg); line-height: 1.4; word-wrap: break-word; }
        .message-bubble.sent { background-color: var(--color-chat-message-sent-bg); color: var(--color-chat-message-sent-text); align-self: flex-end; border-bottom-right-radius: var(--border-radius-sm); }
        .message-bubble.received { background-color: var(--color-chat-message-received-bg); color: var(--color-chat-message-received-text); align-self: flex-start; border-bottom-left-radius: var(--border-radius-sm); box-shadow: var(--shadow-sm); }
        .message-sender { display: block; font-size: 0.75rem; font-weight: 600; color: var(--color-primary); margin-bottom: 3px; }
        .message-text { margin: 0; font-size: 0.95rem; }
        .message-time { display: block; font-size: 0.7rem; color: var(--color-text-muted); text-align: right; margin-top: 4px; }
        .message-bubble.received .message-time { text-align: left; }
        .message-input-area { display: flex; align-items: center; padding: 10px 15px; border-top: 1px solid var(--color-border); background-color: #F3F4F6; }
        .message-input-field { flex-grow: 1; padding: 10px; border: 1px solid var(--color-border); border-radius: var(--border-radius-md); resize: none; font-size: 0.95rem; min-height: 40px; max-height: 100px; overflow-y: auto; background-color: var(--color-white); }
        .message-action-btn, .message-send-button { background: none; border: none; font-size: 1.5rem; color: var(--color-text-muted); cursor: pointer; padding: 5px 8px; }
        .message-send-button { color: var(--color-primary); font-weight: bold; }
        .message-action-btn:hover, .message-send-button:hover { color: var(--color-primary-darker); }
        .active-chat-placeholder { text-align: center; color: var(--color-text-muted); margin: auto; animation: fadeInUp 0.5s ease-out; }
        .active-chat-placeholder .placeholder-icon { font-size: 3rem; display: block; margin-bottom: 10px; }
        .active-chat-placeholder .small-text { font-size: 0.85rem; }
        .chat-empty-state { text-align: center; padding: 40px 20px; background-color: #E5E7EB; border-radius: var(--border-radius-lg); flex-grow: 1; display:flex; flex-direction:column; align-items:center; justify-content:center; animation: fadeInUp 0.5s ease-out; }
        .chat-empty-icon { font-size: 3rem; display: block; margin-bottom: 15px; color: var(--color-text-muted); }
        .chat-empty-state h2 { font-size: 1.5rem; color: var(--color-primary); margin-bottom: 10px;}
        .message-bubble.is-typing { padding: 10px 15px; }
        .typing-indicator { display: flex; align-items: center; gap: 4px; }
        .typing-indicator span { width: 8px; height: 8px; background-color: #9CA3AF; border-radius: 50%; animation: typing-bounce 1.2s infinite ease-in-out; }
        .typing-indicator span:nth-of-type(2) { animation-delay: 0.2s; }
        .typing-indicator span:nth-of-type(3) { animation-delay: 0.4s; }

        .profile-page-layout { }
        .profile-header-card { background-color: #DBEAFE; padding: 25px; border-radius: var(--border-radius-lg); display: flex; align-items: center; gap: 20px; margin-bottom: 30px; box-shadow: var(--shadow-md); animation: fadeInUp 0.5s ease-out; }
        .profile-avatar-large-container { flex-shrink: 0; }
        .profile-avatar-large { font-size: 4rem; background-color: var(--color-avatar-bg); color: var(--color-avatar-text); width: 100px; height: 100px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; border: 3px solid var(--color-white); box-shadow: var(--shadow-sm); }
        .profile-user-info h2 { font-size: 1.8rem; color: var(--color-text); margin: 0 0 5px 0; }
        .profile-user-info p { font-size: 0.95rem; color: var(--color-text-muted); margin-bottom: 10px; }
        .profile-section-card {
             background-color: var(--color-surface); 
             padding: 20px; 
             border-radius: var(--border-radius-lg); 
             box-shadow: var(--shadow-md); 
             margin-bottom: 25px; 
             animation: fadeInUp 0.5s 0.2s ease-out forwards; 
             opacity:0;
        }
        .profile-section-card h3 {
            font-size: 1.3rem; 
            color: var(--color-primary); 
            margin-bottom: 15px; 
            border-bottom: 1px solid var(--color-border); 
            padding-bottom: 8px;
        }
        
        .profile-progress-trends { }
        .profile-progress-trends h4 {
            font-size: 1.1rem; 
            color: var(--color-primary); 
            margin-bottom: 10px; 
            text-align: center; 
        }

        .charts-section { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; margin-bottom: 20px;}
        .mock-chart-container h3 { font-size: 1.2rem; color: var(--color-primary); margin-bottom: 10px; text-align: center; }
        .mock-chart-area { min-height: 200px; background-color: #E5E7EB; border: 1px dashed var(--color-border); border-radius: var(--border-radius-md); display: flex; align-items: center; justify-content: center; font-size: 1.2rem; color: var(--color-text-muted); font-style: italic; animation: fadeInUp 0.5s ease-out; }
        
        .settings-page { }
        .settings-category { background-color: var(--color-surface); padding: 20px; border-radius: var(--border-radius-lg); box-shadow: var(--shadow-md); margin-bottom: 25px; animation: fadeInUp 0.5s ease-out forwards; opacity: 0;}
        .settings-category:nth-of-type(2) { animation-delay: 0.1s; }
        .settings-category:nth-of-type(3) { animation-delay: 0.2s; }
        .settings-category:nth-of-type(4) { animation-delay: 0.3s; }
        .settings-category h3 { font-size: 1.3rem; color: var(--color-primary); margin-bottom: 20px; display: flex; align-items: center; gap: 10px; border-bottom: 1px solid var(--color-border); padding-bottom: 10px;}
        .setting-category-icon { font-size: 1.5rem; }
        .settings-item { display: flex; justify-content: space-between; align-items: center; padding: 12px 0; border-bottom: 1px dashed var(--color-border); }
        .settings-item:last-child { border-bottom: none; }
        .settings-item label:not(.switch-toggle) { font-weight: 500; color: var(--color-text); flex-grow: 1; }
        .setting-control-placeholder, .settings-item .btn-sm, .settings-item .form-control { flex-shrink: 0; margin-left: 15px; }
        .switch-toggle { position: relative; display: inline-block; width: 50px; height: 28px; flex-grow: 0; flex-shrink: 0; } 
        .switch-toggle input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; }
        .slider.round { border-radius: 28px; }
        .slider:before { position: absolute; content: ""; height: 20px; width: 20px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: var(--color-accent1); }
        input:focus + .slider { box-shadow: 0 0 1px var(--color-accent1); }
        input:checked + .slider:before { transform: translateX(22px); } 
        .logout-button-container { margin-top: 30px; text-align: center; animation: fadeInUp 0.5s 0.4s ease-out forwards; opacity: 0;}

        .tag-selection-page-enhanced .page-header h1 { font-size: 2.2rem; }
        .tag-selection-page-enhanced .page-header p { max-width: 650px; }
        .selected-tags-display-area { border: 2px dashed var(--color-border); padding: 15px; margin: 25px 0; border-radius: var(--border-radius-md); min-height: 80px; display: flex; flex-wrap: wrap; align-items: center; justify-content: flex-start; gap: 10px; background-color: var(--color-bg); animation: fadeInUp 0.5s 0.1s ease-out forwards; opacity:0; }
        .selected-tags-placeholder-text { color: var(--color-text-muted); font-style: italic; text-align: center; font-size: 0.95rem; width: 100%; }
        .selected-tags-list { display: flex; flex-wrap: wrap; gap: 8px; }
        .selected-tag-pill { display: inline-flex; align-items: center; background-color: var(--color-tag-pill-bg); color: var(--color-tag-pill-text); padding: 6px 12px; border-radius: var(--border-radius-pill); font-size: 0.9rem; font-weight: 500; border: 1px solid var(--color-tag-pill-border); box-shadow: var(--shadow-sm); }
        .tag-pill-emoji { margin-right: 6px; font-size: 1rem; }
        .remove-tag-btn { background: none; border: none; color: var(--color-tag-pill-text); opacity: 0.7; font-size: 1.1rem; margin-left: 8px; cursor: pointer; padding: 0 2px; line-height: 1; }
        .remove-tag-btn:hover { opacity: 1; color: var(--color-danger); }
        .suggested-tags-section { margin-bottom: 30px; animation: fadeInUp 0.5s 0.2s ease-out forwards; opacity:0; }
        .suggested-tags-title { font-size: 1.3rem; color: var(--color-primary); margin-bottom: 15px; text-align: center; }
        .suggested-tags-grid { display: flex; flex-wrap: wrap; gap: 12px; justify-content: center; }
        .tag-bubble { display: inline-flex; align-items: center; gap: 8px; background-color: var(--color-tag-bubble-bg); color: var(--color-tag-bubble-text); padding: 8px 15px; border-radius: var(--border-radius-pill); font-size: 0.9rem; font-weight: 500; border: 1px solid transparent; cursor: pointer; transition: all 0.2s ease-in-out; box-shadow: var(--shadow-sm); }
        .tag-bubble:hover:not(:disabled) { background-color: var(--color-tag-bubble-hover-bg); color: var(--color-tag-bubble-hover-text); transform: translateY(-2px); box-shadow: var(--shadow-md); border-color: var(--color-accent1); }
        .tag-bubble.selected { background-color: var(--color-accent1); color: var(--color-white); border-color: var(--color-accent1); cursor: default; }
        .tag-bubble:disabled { opacity: 0.6; cursor: not-allowed; }
        .tag-bubble-emoji { font-size: 1.1rem; }
        .tag-bubble-text { white-space: nowrap; }
        .tag-selection-actions { margin-top: 30px; display: flex; flex-direction: column; gap: 10px; animation: fadeInUp 0.5s 0.3s ease-out forwards; opacity:0; }


        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; font-weight: 500; margin-bottom: 8px; color: var(--color-text); font-size: 0.9rem; }
        .form-control, input[type="text"], input[type="email"], input[type="password"], input[type="search"], input[type="date"], input[type="number"], textarea, select { width: 100%; padding: 12px 15px; border: 1px solid var(--color-border); border-radius: var(--border-radius-md); font-size: 1rem; background-color: var(--color-white); color: var(--color-text); transition: border-color 0.2s, box-shadow 0.2s; }
        .form-control:focus, input[type="text"]:focus, input[type="email"]:focus, input[type="password"]:focus, input[type="search"]:focus, input[type="date"]:focus, input[type="number"]:focus, textarea:focus, select:focus { outline: none; border-color: var(--color-primary); box-shadow: 0 0 0 3px var(--color-primary-shadow);  }
        .form-control-sm { padding: 8px 12px; font-size: 0.9rem; border-radius: var(--border-radius-sm); }
        textarea.form-control { min-height: 80px; resize: vertical; }

        .btn { display: inline-block; padding: 12px 24px; border-radius: var(--border-radius-md); font-weight: 600; text-align: center; cursor: pointer; transition: all 0.25s cubic-bezier(0.175, 0.885, 0.32, 1.275); border: 1px solid transparent; font-size: 1rem; letter-spacing: 0.5px; box-shadow: 0 2px 4px rgba(0,0,0,0.08), 0 1px 2px rgba(0,0,0,0.04); transform: translateY(0); -webkit-tap-highlight-color: transparent; }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 6px 12px rgba(0,0,0,0.1), 0 3px 6px rgba(0,0,0,0.08); }
        .btn:active { transform: translateY(0px); box-shadow: inset 0 2px 4px rgba(0,0,0,0.15), 0 1px 1px rgba(0,0,0,0.05); }
        .btn:disabled, .btn[disabled] { opacity: 0.6; cursor: not-allowed; box-shadow: none; transform: translateY(0); }
        .btn-primary { background-image: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-darker) 100%); color: var(--color-white); border-color: transparent; box-shadow: 0 4px 8px var(--color-primary-shadow), 0 2px 4px rgba(0,0,0,0.06); }
        .btn-primary:hover { background-image: linear-gradient(135deg, var(--color-primary-darker) 0%, var(--color-primary) 100%); box-shadow: 0 8px 16px var(--color-primary-shadow), 0 4px 8px rgba(0,0,0,0.08); }
        .btn-primary:active { background-image: linear-gradient(135deg, var(--color-primary-darker) 0%, var(--color-primary) 100%); box-shadow: inset 0 2px 4px rgba(0,0,0,0.25), 0 1px 1px rgba(0,0,0,0.1); }
        .btn-primary:disabled, .btn-primary[disabled] { background-image: none; background-color: #93C5FD; color: rgba(255,255,255,0.7); border-color: #93C5FD; }
        .btn-secondary { background-color: var(--color-surface); color: var(--color-primary); border: 1px solid var(--color-border); }
        .btn-secondary:hover { background-color: var(--color-border); border-color: var(--color-text-muted); color: var(--color-primary-darker); }
         .btn-secondary:active { background-color: var(--color-border); border-color: var(--color-text-muted); }
        .btn-outline-light { background-color: transparent; color: var(--color-primary); border: 2px solid var(--color-primary); padding: 10px 22px; }
        .btn-outline-light:hover { background-color: #DBEAFE; color: var(--color-primary-darker); border-color: var(--color-primary-darker); }
         .btn-outline-light:active { background-color: #DBEAFE; }
        .btn-danger { background-image: linear-gradient(135deg, var(--color-danger-light) 0%, var(--color-danger) 100%); color: var(--color-white); border-color: transparent; box-shadow: 0 4px 8px var(--color-danger-shadow), 0 2px 4px rgba(0,0,0,0.06); }
        .btn-danger:hover { background-image: linear-gradient(135deg, var(--color-danger) 0%, var(--color-danger-dark) 100%); box-shadow: 0 8px 16px var(--color-danger-shadow), 0 4px 8px rgba(0,0,0,0.08); }
        .btn-danger:active { background-image: linear-gradient(135deg, var(--color-danger) 0%, var(--color-danger-dark) 100%); box-shadow: inset 0 2px 4px rgba(0,0,0,0.25), 0 1px 1px rgba(0,0,0,0.1); }
        .btn-danger:disabled, .btn-danger[disabled] { background-image: none; background-color: #FCA5A5; color: rgba(255,255,255,0.7); border-color: #FCA5A5; }
        .btn-info { background-color: var(--color-info); color: var(--color-white); border-color: var(--color-info); }
        .btn-block { display: block; width: 100%; }
        .btn-sm { padding: 8px 16px; font-size: 0.9rem; letter-spacing: 0.3px; }
        .btn-lg { padding: 14px 28px; font-size: 1.1rem; letter-spacing: 0.6px; }
        .btn-link { background: none; border: none; color: var(--color-primary); text-decoration: underline; cursor: pointer; padding: 0; font-weight: 600; font-size: inherit; box-shadow: none; transform: none;}
        .btn-link:hover { color: var(--color-primary-darker); text-decoration: underline; box-shadow: none; transform: none; }
        .btn-link:active { color: var(--color-primary-darker); text-decoration: underline; box-shadow: none; transform: none; }

        .app-navbar { background-color: var(--color-surface); padding: 10px 0; box-shadow: var(--shadow-sm); border-bottom: 1px solid var(--color-border); position: sticky; top: 0; z-index: 1000; width: 100%; }
        .navbar-container-app { display: flex; justify-content: space-between; align-items: center; max-width: 1100px; margin: 0 auto; padding: 0 20px; }
        .navbar-brand-app { font-size: 1.5rem; font-weight: 700; color: var(--color-primary); cursor: pointer; }
        .app-nav-links { display: flex; gap: 10px; }
        .app-nav-link { background: none; border: none; color: var(--color-text-muted); padding: 8px 12px; border-radius: var(--border-radius-sm); cursor: pointer; font-weight: 500; font-size: 0.95rem; }
        .app-nav-link:hover, .app-nav-link.active { color: var(--color-primary); background-color: var(--color-bg); }
        
        .dashboard-card { background-color: var(--color-surface); padding: 20px; border-radius: var(--border-radius-md); box-shadow: var(--shadow-sm); } 
        .dashboard-card h4 { margin-top: 0; margin-bottom: 10px; color: var(--color-primary); }
        .notification-item-placeholder, .profile-details-placeholder, .settings-list-placeholder li { background-color: var(--color-surface); padding: 15px; border-radius: var(--border-radius-md); margin-bottom: 15px; box-shadow: var(--shadow-sm); display: flex; justify-content: space-between; align-items: center; }
        .settings-list-placeholder li { justify-content: flex-start; }
        .fab-placeholder { position: fixed; bottom: 30px; right: 30px; width: 60px; height: 60px; border-radius: 50%; background-color: var(--color-primary); color: var(--color-white); font-size: 2rem; line-height: 60px; text-align: center; box-shadow: var(--shadow-lg); border: none; cursor: pointer; }
        .fab-placeholder.embedded-fab { bottom: 20px; right: 20px; }
        .avatar-icon { font-size: 2.5rem; color: var(--color-white); }

        /* Mascot Placeholders */
        .app-logo-placeholder {
            width: 40px; height: 40px;
            background-color: var(--color-accent2);
            color: var(--color-white);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: bold;
            border-radius: var(--border-radius-sm);
            text-align: center;
            line-height: 1.2;
        }
        .sidebar-logo-area .app-logo-placeholder { width: 36px; height: 36px; font-size: 0.6rem;}
        .welcome-logo .app-logo-placeholder { width: 50px; height: 50px; font-size: 0.8rem;}

        .mascot-placeholder {
            background-color: var(--color-accent1);
            color: var(--color-white);
            padding: 10px;
            border-radius: var(--border-radius-md);
            text-align: center;
            font-size: 0.8rem;
            font-weight: bold;
            border: 2px dashed var(--color-white);
            box-shadow: var(--shadow-sm);
            display: inline-flex; /* To control size better */
            align-items: center;
            justify-content: center;
        }
        .welcome-mascot-spot {
            position: absolute;
            bottom: 20px;
            right: 20px;
            width: 80px;
            height: 80px;
            font-size: 0.7rem;
            border-radius: 50%;
        }
        .modal-mascot-peek {
            width: 30px;
            height: 30px;
            padding: 5px;
            font-size: 0.5rem;
            border-radius: 50%;
            align-self: center; /* For modal title flex layout */
        }
        .empty-state-mascot { /* Common for dashboard, goals, habits, explore empty states */
            width: 100px;
            height: 100px;
            margin: 15px auto;
            font-size: 0.9rem;
        }
        .growing-plant-companion {
            width: 50px;
            height: 50px;
            margin-top: 10px;
            font-size: 0.6rem;
            padding: 5px;
        }

        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after { animation-duration: 0.01ms !important; animation-iteration-count: 1 !important; transition-duration: 0.01ms !important; scroll-behavior: auto !important; }
            .staggered-animation-container > *, .welcome-content-wrapper, .spark-of-the-day-card,
            .goals-empty-state, .habit-empty-state, .feed-empty-state, .progress-empty-state, .shop-empty-state, .chat-empty-state, .explore-goals-empty-state,
            .mock-chart-area, .active-chat-placeholder, .profile-header-card, .profile-stats-badges, .profile-recent-activity,
            .settings-category, .logout-button-container, .selected-tags-display-area, .suggested-tags-section, .tag-selection-actions,
            .modal-overlay, .modal-content, .dynamic-signup-card, .goal-journey-empty-state, .habit-item-card, .quest-card,
             .profile-section-card, .dashboard-hero-card, .dashboard-stats-grid-reimagined, .dashboard-missions-grid-reimagined
             { animation: none !important; opacity: 1 !important; transform: none !important; }
        }

        @media (max-width: 992px) { 
            .app-nav-links { display: none; } 
            .navbar-container-app { justify-content: center; }
            .navbar-brand-app { font-size: 1.3rem; }
            .auth-layout { flex-direction: column; }
            .auth-illustration-panel { flex-basis: auto; min-height: 320px; padding: 30px; justify-content: center; } 
            .auth-illustration-panel-content { gap: 20px; }
            .auth-illustration-headlines h1 { font-size: 1.8rem; }
            .auth-illustration-headlines p { font-size: 0.9rem; }
            .decorative-bg-dots { display: none; } 
            .auth-form-panel { padding: 30px; flex-grow: 1; } 
            .auth-form-panel-header { margin-bottom: 20px; }
            .auth-form-panel-content { margin: 0 auto; }
            .welcome-headline { font-size: 2rem; }
            .welcome-tagline { font-size: 1rem; }
            .welcome-content-wrapper { padding: 30px; }
            
            .main-home-layout { flex-direction: column; }
            .left-sidebar { position: static; width: 100%; height: auto; padding: 15px; flex-direction: row; align-items: center; justify-content: space-between; box-shadow: var(--shadow-md); order: -1; z-index: auto; overflow-y: visible; }
            .center-content-area { margin-left: 0; }
            .sidebar-logo-area { padding-bottom: 0; margin-bottom: 0; border-bottom: none; }
            .sidebar-nav { flex-grow: 1; }
            .sidebar-nav ul { display: flex; flex-wrap: wrap; justify-content: center; gap: 5px; }
            .sidebar-nav-item { margin-bottom: 0; padding: 8px 10px; font-size: 0.85rem; }
            .sidebar-nav-item .sidebar-nav-icon { display: none; } 
            
            .right-panel { display: none; } 
            .center-content-area { padding: 20px; }
            .dashboard-grid { grid-template-columns: 1fr; }
            .dashboard-summary-cards { grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); }
            /* .goal-journey-map { justify-content: center; } */ /* Handled by goal-journey-map-visual */
            .goal-journey-map-visual-content { justify-content: center; }
            .goals-grid, .goal-templates-grid, .habits-list, .quests-grid { grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); }
            .chat-layout-container { flex-direction: column; max-height: none; }
            .chat-sidebar { flex: 0 0 auto; max-height: 300px; }
            .active-chat-area { width: 100%; }
            .charts-section, .shop-items-grid { grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));}
            .profile-header-card { flex-direction: column; text-align: center; }
             .explore-goals-page .page-header-extra { max-width: 100%; }
        }

        @media (max-width: 768px) {
            .page-header h1 { font-size: 1.8rem; }
            .page-header p { font-size: 1rem; }
            .embedded-page-content .page-header h1 { font-size: 1.6rem; }
            .summary-card h4 { font-size: 1.1rem; }
            .dashboard-section h2 { font-size: 1.3rem; }
            .auth-illustration-panel { min-height: 280px; } 
            .auth-logo-text { font-size: 1.5rem; }
            .auth-illustration-headlines h1 { font-size: 1.5rem; }
            .auth-form-intro h2 { font-size: 1.5rem; }
            .dashboard-hero-card { flex-direction: column; text-align: center; }
            .hero-text-content h3 { font-size: 1.5rem; }

            .goal-card h3 { font-size: 1.15rem; }
            /* .goal-journey-item { flex-basis: 100%; max-width: none; } */
            /* .goal-journey-item-title { font-size: 1.1rem; } */
            .journey-island { width: 110px; height: 110px; padding: 10px; }
            .journey-island-emoji { font-size: 2rem; }
            .journey-island-title { font-size: 0.75rem; }

            .goal-template-card h3 { font-size: 1.1rem; }
            
            .habit-name { font-size: 1.1rem; }
            .main-content-header h1 { font-size: 1.7rem; }
            .main-content-header .welcome-time-greeting { font-size: 1.2rem; }
            
            .tag-selection-page-enhanced .page-header h1 { font-size: 1.9rem; }
            .tag-bubble { padding: 7px 12px; font-size: 0.85rem; }
            .suggested-tags-grid { gap: 10px; }

            .btn { padding: 10px 20px; font-size: 0.95rem; }
            .btn-sm { padding: 7px 14px; font-size: 0.85rem; }
            .btn-lg { padding: 12px 24px; font-size: 1.05rem; }

            .modal-content { padding: 20px; }
            .modal-content h2 { font-size: 1.3rem; }
            .goal-module-item { flex-direction: column; align-items: flex-start; }
            .module-actions { width: 100%; margin-top: 10px; }
            .module-actions .btn { width: 100%; }
            .welcome-mascot-spot { width: 60px; height: 60px; bottom: 10px; right: 10px; }
            .empty-state-mascot { width: 80px; height: 80px; }
        }

    </style>
</head>
<body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    <script type="module" src="./index.tsx"></script>
</body>
</html>